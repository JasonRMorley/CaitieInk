<div class="accordion" id="accordionClient">
  <!-- Client Details -->
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button" type="button"
              data-bs-toggle="collapse" data-bs-target="#collapseClient"
              aria-expanded="true" aria-controls="collapseClient">
        Client Details
      </button>
    </h2>
    <div id="collapseClient" class="accordion-collapse collapse show" data-bs-parent="#accordionClient">
      <div class="accordion-body">
        <h6><strong>Name:</strong> {{ selected_client.first_name }} {{ selected_client.last_name }}</h6>
        <h6><strong>Phone:</strong> {{ selected_client.phone }}</h6>
        <h6><strong>Notes:</strong> {{ selected_client.notes }}</h6>
        <a href="{{ url_for('route_edit_client', client_id=selected_client.id) }}"
           class="btn btn-sm btn-outline-primary mt-2">
          Edit Details
        </a>
      </div>
    </div>
  </div>

  <!-- Tattoos -->
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button"
              data-bs-toggle="collapse" data-bs-target="#collapseTattoos"
              aria-expanded="false" aria-controls="collapseTattoos">
        Tattoos
      </button>
    </h2>
    <div id="collapseTattoos" class="accordion-collapse collapse" data-bs-parent="#accordionClient">
      <div class="accordion-body">
        <a href="{{ url_for('route_add_tattoo', client_id=selected_client.id) }}"
           class="btn btn-sm btn-success mb-3">Add Tattoo</a>

        {% if selected_client.tattoos %}
          <div class="row g-3">
            {% for tattoo in selected_client.tattoos %}
              <div class="col-md-6">
                <div class="card h-100">
                  <div class="card-body">
                    <h5 class="card-title d-flex justify-content-between align-items-center">
                      {{ tattoo.title }}
                      <div>
                        <a href="{{ url_for('route_edit_tattoo', client_id=selected_client.id, tattoo_id=tattoo.id) }}"
                           class="btn btn-sm btn-outline-primary">Edit</a>
                      </div>
                    </h5>
                    <ul class="mb-2">
                      <li>Estimate: £{{ tattoo.price_estimate }}</li>
                      <li>Final Price: £{{ tattoo.price_final }}</li>
                      <li>Status: {{ tattoo.status }}</li>
                      <li>Notes: {{ tattoo.note }}</li>
                    </ul>
                    <div>
                      <a href="{{ url_for('route_add_booking', client_id=selected_client.id, tattoo_id=tattoo.id) }}"
                         class="card-link">Book-in</a>
                    </div>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <p class="text-muted">No tattoos added yet.</p>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Bookings -->
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button"
              data-bs-toggle="collapse" data-bs-target="#collapseBookings"
              aria-expanded="false" aria-controls="collapseBookings">
        Bookings
      </button>
    </h2>
    <div id="collapseBookings" class="accordion-collapse collapse" data-bs-parent="#accordionClient">
      <div class="accordion-body">
        {% if selected_client and selected_client.tattoos %}
          {% for tattoo in selected_client.tattoos %}
            <h5 class="mt-2">{{ tattoo.title }}</h5>
            {% if tattoo.bookings %}
              <ul>
                {% for booking in tattoo.bookings %}
                  <li>{{ booking.date }} {{ booking.time }}</li>
                {% endfor %}
              </ul>
            {% else %}
              <p class="text-muted">No bookings yet</p>
            {% endif %}
          {% endfor %}
        {% else %}
          <p class="text-muted">No bookings found for this client</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
